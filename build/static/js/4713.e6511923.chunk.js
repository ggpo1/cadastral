"use strict";(self.webpackChunkcadastral=self.webpackChunkcadastral||[]).push([[4713],{58971:function(e,t,r){r.d(t,{ym:function(){return k},RF:function(){return v},vY:function(){return c},J9:function(){return M},U1:function(){return C},Ie:function(){return z},G6:function(){return I}});var a=r(29439),i=r(92026),n=r(77981);var o=function(e,t,r){return[t,r]},l=function(e,t,r){return[t,r,e[2]]},s=function(e,t,r){return[t,r,e[2],e[3]]};function c(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:(0,i.pC)(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function u(e,t){var r=e.scale,a=e.translate;return Math.round((t-a[0])/r[0])}function h(e,t){var r=e.scale,a=e.translate;return Math.round((a[1]-t)/r[1])}function f(e,t,r){for(var a,i,n,o,l=[],s=0;s<r.length;s++){var c=r[s];s>0?(n=u(e,c[0]),o=h(e,c[1]),n===a&&o===i||(l.push(t(c,n-a,o-i)),a=n,i=o)):(a=u(e,c[0]),i=h(e,c[1]),l.push(t(c,a,i)))}return l.length>0?l:null}function m(e,t){var r=e.scale,a=e.translate;return t*r[0]+a[0]}function y(e,t){var r=e.scale;return e.translate[1]-t*r[1]}function d(e,t,r){var i=new Array(r.length);if(!r.length)return i;var n=(0,a.Z)(e.scale,2),o=n[0],l=n[1],s=m(e,r[0][0]),c=y(e,r[0][1]);i[0]=t(r[0],s,c);for(var u=1;u<r.length;u++){var h=r[u];s+=h[0]*o,c-=h[1]*l,i[u]=t(h,s,c)}return i}function g(e,t,r){for(var a=new Array(r.length),i=0;i<r.length;i++)a[i]=d(e,t,r[i]);return a}function p(e,t,r,a,i){return t.points=function(e,t,r,a){return f(e,r?a?s:l:a?l:o,t)}(e,r.points,a,i),t}function v(e,t,r,a,i){return t.x=u(e,r.x),t.y=h(e,r.y),t!==r&&(a&&(t.z=r.z),i&&(t.m=r.m)),t}function x(e,t,r,a,i){var n=function(e,t,r,a){for(var i=[],n=r?a?s:l:a?l:o,c=0;c<t.length;c++){var u=f(e,n,t[c]);u&&u.length>=3&&i.push(u)}return i.length?i:null}(e,r.rings,a,i);return n?(t.rings=n,t):null}function w(e,t,r,a,i){var n=function(e,t,r,a){for(var i=[],n=r?a?s:l:a?l:o,c=0;c<t.length;c++){var u=f(e,n,t[c]);u&&u.length>=2&&i.push(u)}return i.length?i:null}(e,r.paths,a,i);return n?(t.paths=n,t):null}function k(e,t){return e&&t?(0,n.wp)(t)?v(e,{},t,!1,!1):(0,n.l9)(t)?w(e,{},t,!1,!1):(0,n.oU)(t)?x(e,{},t,!1,!1):(0,n.aW)(t)?p(e,{},t,!1,!1):(0,n.YX)(t)?function(e,t,r,a,i){return t.xmin=u(e,r.xmin),t.ymin=h(e,r.ymin),t.xmax=u(e,r.xmax),t.ymax=h(e,r.ymax),t!==r&&(a&&(t.zmin=r.zmin,t.zmax=r.zmax),i&&(t.mmin=r.mmin,t.mmax=r.mmax)),t}(e,{},t,!1,!1):null:null}function M(e,t,r,a,n){return(0,i.pC)(r)&&(t.points=function(e,t,r,a){return d(e,r?a?s:l:a?l:o,t)}(e,r.points,a,n)),t}function C(e,t,r,a,n){return(0,i.Wi)(r)||(t.x=m(e,r.x),t.y=y(e,r.y),t!==r&&(a&&(t.z=r.z),n&&(t.m=r.m))),t}function z(e,t,r,a,n){return(0,i.pC)(r)&&(t.rings=function(e,t,r,a){return g(e,r?a?s:l:a?l:o,t)}(e,r.rings,a,n)),t}function I(e,t,r,a,n){return(0,i.pC)(r)&&(t.paths=function(e,t,r,a){return g(e,r?a?s:l:a?l:o,t)}(e,r.paths,a,n)),t}},16285:function(e,t,r){r.d(t,{Z:function(){return h}});var a=r(37762),i=r(29439),n=r(15671),o=r(43144),l=r(78915),s=r(691),c=r(6388),u=r(31027),h=function(){function e(t){(0,n.Z)(this,e),this._resourceManager=t}return(0,o.Z)(e,[{key:"dispose",value:function(){this._rasterizationCanvas=null}},{key:"rasterizeJSONResource",value:function(e,t,r){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),"simple-fill"===e.type||"esriSFS"===e.type){var a=l.fN.rasterizeSimpleFill(this._rasterizationCanvas,e.style,t),n=(0,i.Z)(a,3),o=n[0];return{size:[n[1],n[2]],image:new Uint32Array(o.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if("simple-line"===e.type||"esriSLS"===e.type||"line"===e.type&&e.dashTemplate){var u,h;if("simple-line"===e.type||"esriSLS"===e.type)switch(u=(0,l.U1)(e.style,e.cap),e.cap){case"butt":h="Butt";break;case"square":h="Square";break;default:h="Round"}else u=e.dashTemplate,h=e.cim.capStyle;var f=l.fN.rasterizeSimpleLine(u,h),m=(0,i.Z)(f,3),y=m[0];return{size:[m[1],m[2]],image:new Uint32Array(y.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}var d,g,p;if("simple-marker"===e.type||"esriSMS"===e.type||"line-marker"===e.type?(d=l.B$.fromSimpleMarker(e),p=(0,c.Fp)(d)):e.cim&&"CIMHatchFill"===e.cim.type?(d=l.B$.fromCIMHatchFill(e.cim),g=new s.Z(d.frame.xmin,-d.frame.ymax,d.frame.xmax-d.frame.xmin,d.frame.ymax-d.frame.ymin)):e.cim.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===e.cim.markerPlacement.type?(d=l.B$.fromCIMInsidePolygon(e.cim),g=new s.Z(d.frame.xmin,-d.frame.ymax,d.frame.xmax-d.frame.xmin,d.frame.ymax-d.frame.ymin)):(d=e.cim,p=(0,c.Fp)(d)),p&&!r){var v=(0,c.RL)(p),x=(0,i.Z)(v,3),w=x[0],k=x[1],M=x[2];return w?{size:[k,M],image:new Uint32Array(w.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}var C=l.B$.rasterize(this._rasterizationCanvas,d,g,this._resourceManager,!r),z=(0,i.Z)(C,5),I=z[0],b=z[1],P=z[2],S=z[3],_=z[4];return I?{size:[b,P],image:new Uint32Array(I.buffer),sdf:!1,simplePattern:!1,anchorX:S,anchorY:_}:null}},{key:"rasterizeImageResource",value:function(e,t,r,n){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=t;var o=this._rasterizationCanvas.getContext("2d");r instanceof ImageData?o.putImageData(r,0,0):(r.setAttribute("width","".concat(e,"px")),r.setAttribute("height","".concat(t,"px")),o.drawImage(r,0,0,e,t));var l,s=o.getImageData(0,0,e,t),c=new Uint8Array(s.data);if(n){var h,f=(0,a.Z)(n);try{for(f.s();!(h=f.n()).done;){var m=h.value;if(m&&m.oldColor&&4===m.oldColor.length&&m.newColor&&4===m.newColor.length){var y=(0,i.Z)(m.oldColor,4),d=y[0],g=y[1],p=y[2],v=y[3],x=(0,i.Z)(m.newColor,4),w=x[0],k=x[1],M=x[2],C=x[3];if(d===w&&g===k&&p===M&&v===C)continue;for(var z=0;z<c.length;z+=4)d===c[z]&&g===c[z+1]&&p===c[z+2]&&v===c[z+3]&&(c[z]=w,c[z+1]=k,c[z+2]=M,c[z+3]=C)}}}catch(R){f.e(R)}finally{f.f()}}for(var I=0;I<c.length;I+=4)l=c[I+3]/255,c[I]=c[I]*l,c[I+1]=c[I+1]*l,c[I+2]=c[I+2]*l;var b=c,P=e,S=t,_=512;if(P>=_||S>=_){var F=P/S;F>1?(P=_,S=Math.round(_/F)):(S=_,P=Math.round(_*F)),b=new Uint8Array(4*P*S);var A=new Uint8ClampedArray(b.buffer);(0,u.TT)(c,e,t,A,P,S,!1)}return{size:[P,S],image:new Uint32Array(b.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}]),e}()},60975:function(e,t,r){r.r(t),r.d(t,{previewCIMSymbol:function(){return R}});var a,i,n=r(15861),o=r(87757),l=r(17842),s=r(37762),c=r(15671),u=r(43144),h=r(51995),f=r(76200),m=r(66978),y=r(643),d=r(77981),g=r(79815),p=r(59001),v=r(16285),x=r(22532),w=r(31027),k=r(49729),M=r(83748);(i=a||(a={})).Legend="legend",i.Preview="preview";var C=function(e,t,r){if(e&&e.targetSize){var a;if(r){var i=Math.max(r.frame.xmax-r.frame.xmin,r.frame.ymax-r.frame.ymin);a=e.targetSize/(0,l.F2)(i)}else a=e.targetSize/t.referenceSize;return a}return e&&e.scaleFactor?e.scaleFactor:1},z={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:2,ymin:-2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:2,ymin:-2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}},I=function(){function e(t,r){(0,c.Z)(this,e),this._spatialReference=t,this._avoidSDF=r,this._resourceCache=new Map,this._pictureMarkerCache=new Map,this._textRasterizer=new x.d,this._cimResourceManager=new p.Z,this._rasterizer=new v.Z(this._cimResourceManager)}return(0,u.Z)(e,[{key:"rasterizeCIMSymbolAsync",value:function(){var e=(0,n.Z)(o.mark((function e(t,r,a,i,n,l,s,c){var u;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=i||(r?null!=r.centroid?"esriGeometryPolygon":(0,d.Ji)(r.geometry):null)||P(t),e.next=3,this.analyzeCIMSymbol(t,r?b(r.attributes):null,a,i,c);case 3:return u=e.sent,e.abrupt("return",this.rasterizeCIMSymbol(u,r,i,n,l,s));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,a,i,n,o,l,s){return e.apply(this,arguments)}}()},{key:"analyzeCIMSymbol",value:function(){var e=(0,n.Z)(o.mark((function e(t,r,a,i,n){var l,s,c,u,h,f;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=[],s=r?{geometryType:i,spatialReference:this._spatialReference,fields:r}:null,e.next=3,(0,g.c)(t.data,s,this._cimResourceManager,l,this._avoidSDF);case 3:for((0,m.k_)(n),u=0,h=l;u<h.length;u++)"CIMPictureMarker"!==(f=h[u]).cim.type&&"CIMPictureFill"!==f.cim.type&&"CIMPictureStroke"!==f.cim.type||(c||(c=[]),c.push(this.fetchPictureMarkerResource(f,n))),a&&"text"===f.type&&"string"==typeof f.text&&f.text.indexOf("[")>-1&&(f.text=(0,w.Qs)(a,f.text,f.cim.textCase));if(e.t0=c,!e.t0){e.next=9;break}return e.next=9,Promise.all(c);case 9:return e.abrupt("return",l);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,a,i,n){return e.apply(this,arguments)}}()},{key:"fetchPictureMarkerResource",value:function(){var e=(0,n.Z)(o.mark((function e(t,r){var a,i;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.materialHash,this._pictureMarkerCache.get(a)){e.next=6;break}return e.next=4,(0,f.default)(t.cim.url,{responseType:"image",signal:r&&r.signal});case 4:i=e.sent.data,this._pictureMarkerCache.set(a,i);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"rasterizeCIMSymbol",value:function(e,t,r,a,i,n){var o,l=[],c=(0,s.Z)(e);try{for(c.s();!(o=c.n()).done;){var u=o.value;a&&"function"==typeof a.scaleFactor&&(a.scaleFactor=a.scaleFactor(t,i,n));var h=this._getRasterizedResource(u,t,r,a,i,n);if(h){var f=0,m=h.anchorX||0,y=h.anchorY||0,d=!1,g=0,p=0;if("esriGeometryPoint"===r){var v=C(a,u,null);if(g=(0,w.hf)(u.offsetX,t,i,n)*v||0,p=(0,w.hf)(u.offsetY,t,i,n)*v||0,"marker"===u.type)f=(0,w.hf)(u.rotation,t,i,n)||0,d=!!u.rotateClockwise&&u.rotateClockwise;else if("text"===u.type){if(f=(0,w.hf)(u.angle,t,i,n)||0,void 0!==u.horizontalAlignment)switch(u.horizontalAlignment){case"left":m=-.5;break;case"right":m=.5;break;default:m=0}if(void 0!==u.verticalAlignment)switch(u.verticalAlignment){case"top":y=.5;break;case"bottom":y=-.5;break;case"baseline":y=-.25;break;default:y=0}}}null!=h&&l.push({angle:f,rotateClockWise:d,anchorX:m,anchorY:y,offsetX:g,offsetY:p,rasterizedResource:h})}}}catch(x){c.e(x)}finally{c.f()}return this.getSymbolImage(l)}},{key:"getSymbolImage",value:function(e){for(var t=document.createElement("canvas"),r=t.getContext("2d"),a=0,i=0,n=0,o=0,s=[],c=0;c<e.length;c++){var u=e[c],h=u.rasterizedResource;if(h){var f=h.size,m=u.offsetX,y=u.offsetY,d=u.anchorX,g=u.anchorY,p=u.rotateClockWise||!1,v=u.angle,x=(0,l.F2)(m)-f[0]*(.5+d),w=(0,l.F2)(y)-f[1]*(.5+g),k=x+f[0],C=w+f[1];if(v){p&&(v=-v);var z=Math.sin(v*Math.PI/180),I=Math.cos(v*Math.PI/180),b=x*I-w*z,P=x*z+w*I,S=x*I-C*z,_=x*z+C*I,F=k*I-C*z,A=k*z+C*I,R=k*I-w*z,D=k*z+w*I;x=Math.min(b,S,F,R),w=Math.min(P,_,A,D),k=Math.max(b,S,F,R),C=Math.max(P,_,A,D)}a=x<a?x:a,i=w<i?w:i,n=k>n?k:n,o=C>o?C:o;var Z=r.createImageData(h.size[0],h.size[1]);Z.data.set(new Uint8ClampedArray(h.image.buffer));var U={offsetX:m,offsetY:y,rotateClockwise:p,angle:v,rasterizedImage:Z,anchorX:d,anchorY:g};s.push(U)}}t.width=n-a,t.height=o-i;for(var T=-a,Y=o,G=0;G<s.length;G++){var N=s[G],X=this._imageDataToCanvas(N.rasterizedImage),L=N.rasterizedImage.width,j=N.rasterizedImage.height,O=T-L*(.5+N.anchorX),V=Y-j*(.5-N.anchorY);if(N.angle){var E=(360-N.angle)*Math.PI/180;r.save(),r.translate((0,l.F2)(N.offsetX),-(0,l.F2)(N.offsetY)),r.translate(T,Y),r.rotate(E),r.translate(-T,-Y),r.drawImage(X,O,V),r.restore()}else r.drawImage(X,O+(0,l.F2)(N.offsetX),V-(0,l.F2)(N.offsetY))}var B=new M.Z({x:T/t.width-.5,y:Y/t.height-.5});return{imageData:0!==t.width&&0!==t.height?r.getImageData(0,0,t.width,t.height):r.createImageData(1,1),anchorPosition:B}}},{key:"_imageDataToCanvas",value:function(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));var t=this._imageDataCanvas,r=t.getContext("2d");return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t}},{key:"_imageTo32Array",value:function(e,t,r,a){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));var i=this._imageDataCanvas,n=i.getContext("2d");if(i.width=t,i.height=r,n.drawImage(e,0,0,t,r),a){n.save();var o=new h.Z(a);n.fillStyle=o.toHex(),n.globalCompositeOperation="multiply",n.fillRect(0,0,t,r),n.globalCompositeOperation="destination-atop",n.drawImage(e,0,0,t,r),n.restore()}return new Uint32Array(n.getImageData(0,0,t,r).data.buffer)}},{key:"_getRasterizedResource",value:function(e,t,r,i,n,o){var l,s,c,u,h=null,f=null;if("esriGeometryPolyline"===r||"esriGeometryPolygon"===r){var m=i&&i.style?i.style:a.Legend,d="esriGeometryPolyline"===r?z.stroke[m]:z.fill[m];if("line"===e.type){var g;if("CIMSolidStroke"!==e.cim.type){if("CIMPictureStroke"===e.cim.type){var p=(0,w.hf)(e.width,t,n,o),v=(0,w.hf)(e.color,t,n,o),x=this._getPictureResource(e,p,v),M=x.image,I=x.width,b=x.height;return this._rasterizePictureResource(e,M,I,b,d,p)}return null}l=(g=S(e,t,n,o)).analyzedCIM,c=g.hash,s=this._embedCIMLayerInVectorMarker(l,d)}else if("marker"===e.type){if("CIMPictureMarker"===e.cim.type)return null;if("CIMVectorMarker"!==e.cim.type)return null;e.cim.offsetX=(0,w.hf)(e.offsetX,t,n,o),e.cim.offsetY=(0,w.hf)(e.offsetY,t,n,o),e.cim.rotation=(0,w.hf)(e.rotation,t,n,o),e.cim.markerPlacement=e.markerPlacement,l=S(e,t,n,o).analyzedCIM,c=(0,y.hP)(JSON.stringify(l)).toString(),s=this._embedCIMLayerInVectorMarker(l,d),h=(0,w.hf)(e.size,t,n,o),f=e.path}else{if("text"===e.type)return null;if("fill"===e.type){var P;if("CIMHatchFill"===e.cim.type||"CIMVectorMarker"===e.cim.type||"CIMPictureMarker"===e.cim.type||"CIMPictureFill"===e.cim.type){var _,F,A,R=e.cim.size||e.cim.height;if("CIMPictureMarker"===e.cim.type||"CIMPictureFill"===e.cim.type){var D=this._getPictureResource(e,R,(0,w.hf)(e.color,t,n,o));_=D.image,F=D.width,A=D.height}else{var Z=S(e,t,n,o);l=Z.analyzedCIM,c=Z.hash;var U=this._rasterizer.rasterizeJSONResource({cim:l,type:e.type,url:e.url,mosaicHash:c,size:R,path:f},1,this._avoidSDF);_=U.image,F=U.size[0],A=U.size[1]}return this._rasterizePictureResource(e,_,F,A,d,null)}if("CIMSolidFill"!==e.cim.type)return null;l=(P=S(e,t,n,o)).analyzedCIM,c=P.hash,s=this._embedCIMLayerInVectorMarker(l,d)}}}else{if("text"===e.type)return u=this._rasterizeTextResource(e,t,i,n,o);var T=S(e,t,n,o);l=T.analyzedCIM,c=T.hash;var Y=C(i,e,null);if("CIMPictureMarker"===e.cim.type){var G=(0,w.hf)(e.size,t,n,o)*Y,N=this._getPictureResource(e,G,(0,w.hf)(e.color,t,n,o));return u={image:N.image,size:[N.width,N.height],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0}}(0,k.FW)(l,Y,{preserveOutlineWidth:!1}),s=l}c+=r,i&&(c+=JSON.stringify(i));var X=this._resourceCache;return X.has(c)?X.get(c):(u=this._rasterizer.rasterizeJSONResource({cim:s,type:e.type,url:e.url,mosaicHash:c,size:h,path:f},window.devicePixelRatio||1,this._avoidSDF),X.set(c,u),u)}},{key:"_rasterizeTextResource",value:function(e,t,r,a,i){var n=C(r,e,null),o=(0,w.hf)(e.text,t,a,i);if(!o||0===o.length)return null;var l=(0,w.hf)(e.fontName,t,a,i),s=(0,w.hf)(e.style,t,a,i),c=(0,w.hf)(e.weight,t,a,i),u=(0,w.hf)(e.decoration,t,a,i),h=(0,w.hf)(e.size,t,a,i)*n,f=(0,w.hf)(e.horizontalAlignment,t,a,i),m=(0,w.hf)(e.verticalAlignment,t,a,i),y=(0,w.nn)((0,w.hf)(e.color,t,a,i)),d=(0,w.nn)((0,w.hf)(e.outlineColor,t,a,i)),g={color:y,size:h,horizontalAlignment:f,verticalAlignment:m,font:{family:l,style:s,weight:c,decoration:u},halo:{size:(0,w.hf)(e.outlineSize,t,a,i)||0,color:d,style:s},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,g)}},{key:"_rasterizePictureResource",value:function(e,t,r,a,i,n){var o=document.createElement("canvas"),c=o.getContext("2d");o.height=(0,l.F2)(Math.max(i.frame.ymax-i.frame.ymin,n)),o.width=(0,l.F2)(i.frame.xmax-i.frame.xmin);var u=c.createImageData(r,a);u.data.set(new Uint8ClampedArray(t.buffer));var h=this._imageDataToCanvas(u),f=c.createPattern(h,"repeat"),m=Math.cos((-e.cim.rotation||0)*Math.PI/180),y=Math.sin((-e.cim.rotation||0)*Math.PI/180);f.setTransform({m11:m,m12:y,m21:-y,m22:m,m41:(0,l.F2)(e.cim.offsetX)||0,m42:(0,l.F2)(e.cim.offsetY)||0});var g,p,v,x=i.canvasPaths;(0,d.oU)(x)?(g=x.rings,c.fillStyle=f,p=c.fill,v=["evenodd"]):(0,d.l9)(x)&&(g=x.paths,c.strokeStyle=f,c.lineWidth=n,p=c.stroke,g[0][0][1]=o.height/2,g[0][1][1]=o.height/2),c.beginPath();var w,k=(0,s.Z)(g);try{for(k.s();!(w=k.n()).done;){var M=w.value,C=M?M.length:0;if(C>1){var z=M[0];c.moveTo((0,l.F2)(z[0]),(0,l.F2)(z[1]));for(var I=1;I<C;++I)z=M[I],c.lineTo((0,l.F2)(z[0]),(0,l.F2)(z[1]));c.closePath()}}}catch(S){k.e(S)}finally{k.f()}p.apply(c,v);var b=c.getImageData(0,0,o.width,o.height),P=new Uint8Array(b.data);return{size:[o.width,o.height],image:new Uint32Array(P.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}},{key:"_getPictureResource",value:function(e,t,r){var a=this._pictureMarkerCache.get(e.materialHash);if(!a)return null;var i=a.height/a.width,n=t?i>1?(0,l.F2)(t):(0,l.F2)(t)/i:a.width,o=t?i>1?(0,l.F2)(t)*i:(0,l.F2)(t):a.height;return{image:this._imageTo32Array(a,n,o,r),width:n,height:o}}},{key:"_embedCIMLayerInVectorMarker",value:function(e,t){var r=(0,d.oU)(t.geometry)?"CIMPolygonSymbol":"CIMLineSymbol",a=t.frame;return{type:"CIMVectorMarker",frame:a,size:a.ymax-a.ymin,markerGraphics:[{type:"CIMMarkerGraphic",geometry:t.geometry,symbol:{type:r,symbolLayers:[e]}}]}}}]),e}();function b(e){return(e?Object.keys(e):[]).map((function(t){return{name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"}}))}function P(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function S(e,t,r,a){var i,n;return"function"==typeof e.materialHash?(i=(0,e.materialHash)(t,r,a),n=(0,g.S)(e.cim,e.materialOverrides)):(i=e.materialHash,n=e.cim),{analyzedCIM:n,hash:i}}var _=r(1682),F=new I(null,!0),A=120;function R(e){return D.apply(this,arguments)}function D(){return D=(0,n.Z)(o.mark((function e(t){var r,a,i,n,s,c,u,h,f,m,y,d,g,p,v,x,w,M,C,z,I,b=arguments;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.length>1&&void 0!==b[1]?b[1]:{},a=r.size,i=r.maxSize,n=r.node,s=r.opacity,c=r.cimOptions||r,u=c.feature,h=c.fieldMap,f=c.geometryType,m=c.style,y=(0,k.kW)(t),(d=Math.min(null!=a?a:y,null!=i?i:(0,l.Wz)(A)))!==y&&(t=t.clone(),(0,k.PI)(t,d,{preserveOutlineWidth:!0})),g=3,t&&t.data&&t.data.symbol&&"CIMPointSymbol"!==t.data.symbol.type&&(g=1),e.next=7,F.rasterizeCIMSymbolAsync(t,u,h,f,{scaleFactor:g,style:m});case 7:return p=e.sent,(v=document.createElement("canvas")).width=p.imageData.width,v.height=p.imageData.height,v.getContext("2d").putImageData(p.imageData,0,0),x=v.width/g,w=v.height/g,null==a||null!=(null==r?void 0:r.scale)&&!(null==r?void 0:r.scale)||(x=(M=x/w)<=1?Math.ceil(d*M):d,w=M<=1?d:Math.ceil(d/M)),(C=new Image(x,w)).src=v.toDataURL(),null!=s&&(C.style.opacity="".concat(s)),z=C,null!=r.effectView&&(I={shape:{type:"image",x:0,y:0,width:x,height:w,src:C.src},fill:null,stroke:null,offset:[0,0]},z=(0,_.w)([[I]],[x,w],{effectView:r.effectView})),e.abrupt("return",(n&&n.appendChild(z),z));case 18:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}},1682:function(e,t,r){r.d(t,{w:function(){return O},r:function(){return E}});var a=r(19545),i=r(76200),n=r(86950),o=r(10064),l=r(93169),s=(r(42877),r(88367)),c=r(37762),u=r(51995),h=r(11245),f=r(22018),m=(r(80975),r(32718),r(67005)),y=0,d=0,g=(0,l.Z)("android"),p=(0,l.Z)("chrome")||g&&g>=4?"auto":"optimizeLegibility",v={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},x=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,w={},k={},M={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},C=Math.PI,z=1;function I(e,t){var r=e*(C/180);return Math.abs(t*Math.sin(r))+Math.abs(t*Math.cos(r))}function b(e){return e.map((function(e){return"".concat(e.command," ").concat(e.values.join(" "))})).join(" ").trim()}function P(e,t,r,a){if(e){if("circle"===e.type)return(0,m.u)("circle",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,r:e.r});if("ellipse"===e.type)return(0,m.u)("ellipse",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry});if("rect"===e.type)return(0,m.u)("rect",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",x:e.x,y:e.y,width:e.width,height:e.height});if("image"===e.type)return(0,m.u)("image",{href:e.src,x:e.x,y:e.y,width:e.width,height:e.height,preserveAspectRatio:"none"});if("path"===e.type){var i="string"!=typeof e.path?b(e.path):e.path;return(0,m.u)("path",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",d:i})}if("text"===e.type)return(0,m.u)("text",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4","text-anchor":a.align,"text-decoration":a.decoration,kerning:a.kerning,rotate:a.rotate,"text-rendering":p,"font-style":a.font.style,"font-variant":a.font.variant,"font-weight":a.font.weight,"font-size":a.font.size,"font-family":a.font.family,x:e.x,y:e.y},e.text)}return null}function S(e){var t={fill:"none",pattern:null,linearGradient:null};if(e)if("type"in e&&"pattern"===e.type){var r="patternId-"+ ++y;t.fill="url(#".concat(r,")"),t.pattern={id:r,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}}}else if("type"in e&&"linear"===e.type){var a="linearGradientId-"+ ++d;t.fill="url(#".concat(a,")"),t.linearGradient={id:a,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map((function(e){return{offset:e.offset,color:e.color&&new u.Z(e.color).toString()}}))}}else if(e){var i=new u.Z(e);t.fill=i.toString()}return t}function _(e){var t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none"};if(e&&(null!=e.width&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new u.Z(e.color).toString()),e.style)){var r=null;if(e.style in M&&(r=M[e.style]),Array.isArray(r)){r=r.slice(0);for(var a=0;a<r.length;++a)r[a]*=e.width;if("butt"!==e.cap){for(var i=0;i<r.length;i+=2)r[i]-=e.width,r[i]<1&&(r[i]=1);for(var n=1;n<r.length;n+=2)r[n]+=e.width}r=r.join(",")}t.dashArray=r}return t}function F(e,t){var r={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};return e&&(r.align=e.align,r.decoration=e.decoration,r.kerning=e.kerning?"auto":"0",r.rotate=e.rotated?"90":"0",r.font.style=t.style||"normal",r.font.variant=t.variant||"normal",r.font.weight=t.weight||"normal",r.font.size=t.size&&t.size.toString()||"10pt",r.font.family=t.family||"serif"),r}function A(e){var t=e.pattern,r=e.linearGradient;if(t)return(0,m.u)("pattern",{id:t.id,patternUnits:"userSpaceOnUse",x:t.x,y:t.y,width:t.width,height:t.height},(0,m.u)("image",{x:t.image.x,y:t.image.y,width:t.image.width,height:t.image.height,href:t.image.href}));if(r){var a=r.stops.map((function(e,t){return(0,m.u)("stop",{key:"".concat(t,"-stop"),offset:e.offset,"stop-color":e.color})}));return(0,m.u)("linearGradient",{id:r.id,gradientUnits:"userSpaceOnUse",x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2},a)}return null}function R(e,t,r){return(0,f.t)(e,(0,f.i)(e),[t,r])}function D(e,t,r,a,i){return(0,f.s)(e,(0,f.i)(e),[t,r]),e[4]=e[4]*t-a*t+a,e[5]=e[5]*r-i*r+i,e}function Z(e,t){w&&"left"in w?(w.left>e&&(w.left=e),w.right<e&&(w.right=e),w.top>t&&(w.top=t),w.bottom<t&&(w.bottom=t)):w={left:e,bottom:t,right:e,top:t}}function U(e){var t,r=e.args,a=r.length;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(t=0;t<a;t+=2)Z(r[t],r[t+1]);k.x=r[a-2],k.y=r[a-1];break;case"H":for(t=0;t<a;++t)Z(r[t],k.y);k.x=r[a-1];break;case"V":for(t=0;t<a;++t)Z(k.x,r[t]);k.y=r[a-1];break;case"m":var i=0;"x"in k||(Z(k.x=r[0],k.y=r[1]),i=2);for(t=i;t<a;t+=2)Z(k.x+=r[t],k.y+=r[t+1]);break;case"l":case"t":for(t=0;t<a;t+=2)Z(k.x+=r[t],k.y+=r[t+1]);break;case"h":for(t=0;t<a;++t)Z(k.x+=r[t],k.y);break;case"v":for(t=0;t<a;++t)Z(k.x,k.y+=r[t]);break;case"c":for(t=0;t<a;t+=6)Z(k.x+r[t],k.y+r[t+1]),Z(k.x+r[t+2],k.y+r[t+3]),Z(k.x+=r[t+4],k.y+=r[t+5]);break;case"s":case"q":for(t=0;t<a;t+=4)Z(k.x+r[t],k.y+r[t+1]),Z(k.x+=r[t+2],k.y+=r[t+3]);break;case"A":for(t=0;t<a;t+=7)Z(r[t+5],r[t+6]);k.x=r[a-2],k.y=r[a-1];break;case"a":for(t=0;t<a;t+=7)Z(k.x+=r[t+5],k.y+=r[t+6])}}function T(e,t,r){var a,i=v[e.toLowerCase()];"number"==typeof i&&(i?t.length>=i&&(a={action:e,args:t.slice(0,t.length-t.length%i)},r.push(a),U(a)):(a={action:e,args:[]},r.push(a),U(a)))}function Y(e){var t={x:0,y:0,width:0,height:0};if("circle"===e.type)t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if("ellipse"===e.type)t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if("image"===e.type||"rect"===e.type)t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if("path"===e.type){var r=function(e){var t=("string"!=typeof e.path?b(e.path):e.path).match(x),r=[];if(w={},k={},!t)return null;for(var a="",i=[],n=t.length,o=0;o<n;++o){var l=t[o],s=parseFloat(l);isNaN(s)?(a&&T(a,i,r),i=[],a=l):i.push(s)}T(a,i,r);var c={x:0,y:0,width:0,height:0};return w&&"left"in w&&(c.x=w.left,c.y=w.top,c.width=w.right-w.left,c.height=w.bottom-w.top),c}(e);t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height}return t}function G(e){var t,r={x:0,y:0,width:0,height:0},a=null,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,o=(0,c.Z)(e);try{for(o.s();!(t=o.n()).done;){var l=t.value;a?(a.x=Math.min(a.x,l.x),a.y=Math.min(a.y,l.y),i=Math.max(i,l.x+l.width),n=Math.max(n,l.y+l.height)):((a=r).x=l.x,a.y=l.y,i=l.x+l.width,n=l.y+l.height)}}catch(s){o.e(s)}finally{o.f()}return a&&(a.width=i-a.x,a.height=n-a.y),a}function N(e,t,r,a,i,n,o,l,s){var c=(o&&n?I(n,t):t)/2,u=(o&&n?I(n,r):r)/2;if(s){var m=s[0],y=s[1];c=(o&&n?I(n,m):m)/2,u=(o&&n?I(n,y):y)/2}var d=e.width+a,g=e.height+a,p=(0,h.c)(),v=(0,h.c)(),x=!1;if(i&&0!==d&&0!==g){var w=d/g,k=t>r?t:r,M=1,C=1;isNaN(k)||(w>1?(M=k/d,C=k/w/g):(C=k/g,M=k*w/d)),(0,f.m)(v,v,D(p,M,C,c,u)),x=!0}var z=e.x+(d-a)/2,b=e.y+(g-a)/2;if((0,f.m)(v,v,R(p,c-z,u-b)),!x&&(d>t||g>r)){var P=d/t>g/r,S=(P?t:r)/(P?d:g);(0,f.m)(v,v,D(p,S,S,z,b))}return n&&(0,f.m)(v,v,function(e,t,r,a){var i=t%360*Math.PI/180;(0,f.r)(e,(0,f.i)(e),i);var n=Math.cos(i),o=Math.sin(i),l=e[4],s=e[5];return e[4]=l*n-s*o+a*o-r*n+r,e[5]=s*n+l*o-r*o-a*n+a,e}(p,n,z,b)),l&&(0,f.m)(v,v,R(p,l[0],l[1])),"matrix(".concat(v[0],",").concat(v[1],",").concat(v[2],",").concat(v[3],",").concat(v[4],",").concat(v[5],")")}function X(e,t,r,a){var i=[],n=[],o=++z,l=function(e,t,r){var a=null==e?void 0:e.effects.find((function(e){return"bloom"===e.type}));if(!a)return null;var i=a.strength,n=a.radius,o=i>0?n:0,l=(i+o)*t,s=4*i+1;return(0,m.u)("filter",{id:"bloom".concat(r),x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},(0,m.u)("feMorphology",{operator:"dilate",radius:(i+.5*o)*(Math.pow(5,t/100)*(.4+t/100)),in:"SourceGraphic",result:"dilate"}),(0,m.u)("feGaussianBlur",{in:"dilate",stdDeviation:l/25,result:"blur"}),(0,m.u)("feGaussianBlur",{in:"blur",stdDeviation:l/50,result:"intensityBlur"}),(0,m.u)("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},(0,m.u)("feFuncR",{type:"linear",slope:s}),(0,m.u)("feFuncG",{type:"linear",slope:s}),(0,m.u)("feFuncB",{type:"linear",slope:s})),(0,m.u)("feMerge",null,(0,m.u)("feMergeNode",{in:"intensityBlur"}),(0,m.u)("feMergeNode",{in:"intensityBrightness"}),(0,m.u)("feGaussianBlur",{stdDeviation:i/10})))}(null==a?void 0:a.effectView,t,o),s=null;if(l){var u,h=null==a||null==(u=a.effectView)?void 0:u.effects.find((function(e){return"bloom"===e.type})),f=(h.strength?h.strength+h.radius/2:0)/3,y=t+t*f,d=r+r*f;s=[Math.max(y,10),Math.max(d,10)]}var g,p=(0,c.Z)(e);try{for(p.s();!(g=p.n()).done;){var v,x=g.value,w=[],k=[],M=0,C=0,b=0,R=(0,c.Z)(x);try{for(R.s();!(v=R.n()).done;){var D=v.value,Z=D.shape,U=D.fill,T=D.stroke,X=D.font,L=D.offset;M+=T&&T.width||0;var j=S(U),O=_(T),V="text"===Z.type?F(Z,X):null;i.push(A(j)),w.push(P(Z,j.fill,O,V)),k.push(Y(Z)),L&&(C+=L[0],b+=L[1])}}catch(B){R.e(B)}finally{R.f()}var E=N(G(k),t,r,M,null==a?void 0:a.scale,null==a?void 0:a.rotation,null==a?void 0:a.useRotationSize,[C,b],s);n.push((0,m.u)("g",{transform:E},w))}}catch(B){p.e(B)}finally{p.f()}return null!=a&&a.useRotationSize&&null!=a&&a.rotation&&(t=I(null==a?void 0:a.rotation,t),r=I(null==a?void 0:a.rotation,r)),l&&(t=s[0],r=s[1]),(0,m.u)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:r},l,(0,m.u)("defs",null,i),l?(0,m.u)("g",{filter:"url(#bloom".concat(o,")")},n):n)}var L=r(74579),j=(0,s.E)();function O(e,t,r){var a=Math.ceil(t[0]),i=Math.ceil(t[1]);if(!e.some((function(e){return!!e.length})))return null;var n=r&&r.node||document.createElement("div");return null!=r.opacity&&(n.style.opacity=r.opacity.toString()),null!=r.effectView&&(n.style.filter=(0,L.wJ)(r.effectView)),j.append(n,X.bind(null,e,a,i,r)),n}function V(e,t,r,a,i){if("multiply"===i)e[t+0]*=r[0],e[t+1]*=r[1],e[t+2]*=r[2],e[t+3]*=r[3];else{var o=(0,n._Y)({r:e[t+0],g:e[t+1],b:e[t+2]});o.h=a.h,o.s=a.s,o.v=o.v/100*a.v;var l=(0,n.xr)(o);e[t+0]=l.r,e[t+1]=l.g,e[t+2]=l.b,e[t+3]*=r[3]}}function E(e,t,r,s,c){return function(e,t,r){return e?(0,i.default)(e,{responseType:"image"}).then((function(e){var a=e.data,i=a.width,n=a.height,o=i/n,l=t;if(r){var s=Math.max(i,n);l=Math.min(l,s)}return{image:a,width:o<=1?Math.ceil(l*o):l,height:o<=1?l:Math.ceil(l/o)}})):Promise.reject(new o.Z("renderUtils: imageDataSize","href not provided."))}(e,t,c).then((function(i){var o=i.width?i.width:t,c=i.height?i.height:t;if(i.image&&function(e,t){return!(!e||"ignore"===t)&&("multiply"!==t||255!==e.r||255!==e.g||255!==e.b||1!==e.a)}(r,s)){var u=i.image.width,h=i.image.height;(0,l.Z)("edge")&&/\.svg$/i.test(e)&&(u-=1,h-=1);var f=function(e,t){e=Math.ceil(e),t=Math.ceil(t);var r=document.createElement("canvas");r.width=e,r.height=t,r.style.width=e+"px",r.style.height=t+"px";var a=r.getContext("2d");return a.clearRect(0,0,e,t),a}(o,c);f.drawImage(i.image,0,0,u,h,0,0,o,c);for(var m=f.getImageData(0,0,o,c),y=[r.r/255,r.g/255,r.b/255,r.a],d=(0,n._Y)(r),g=0;g<m.data.length;g+=4)V(m.data,g,y,d,s);f.putImageData(m,0,0),e=f.canvas.toDataURL("image/png")}else{var p=a.id&&a.id.findCredential(e);if(p&&p.token){var v=-1===e.indexOf("?")?"?":"&";e="".concat(e).concat(v,"token=").concat(p.token)}}return{url:e,width:o,height:c}})).catch((function(){return{url:e,width:t,height:t}}))}},73271:function(e,t,r){r.d(t,{UJ:function(){return n},Jz:function(){return o},Au:function(){return i}});var a=new Float32Array(1);new Uint32Array(a.buffer);function i(e){return[255&e,(65280&e)>>>8,(16711680&e)>>>16,(4278190080&e)>>>24]}function n(e,t){return 65535&e|t<<16}function o(e,t,r,a){return 255&e|(255&t)<<8|(255&r)<<16|a<<24}}}]);
//# sourceMappingURL=4713.e6511923.chunk.js.map